WEBVTT
Kind: captions
Language: zh-CN

00:00:00.360 --> 00:00:04.083
好啦 我已经把最烦人的事情留到了最后 现在我必须来处理闰年

00:00:04.083 --> 00:00:08.216
并且我的“消灭闰年运动”也还没有成功

00:00:08.216 --> 00:00:12.157
所以现在我们得想一个办法来确定某一年是不是闰年

00:00:12.157 --> 00:00:16.479
闰年的规则挺复杂的 来看看维基百科怎么说的吧

00:00:16.479 --> 00:00:21.572
非常有趣 你可以看到 夏至如何在闰年的影响下

00:00:21.572 --> 00:00:25.668
准确地随着时间而变化 但是最棒的是这里还有代码

00:00:25.668 --> 00:00:29.595
虽然不是 Python 代码 但是也非常接近了 这是一种非常清晰的

00:00:29.595 --> 00:00:33.755
描述算法的方式 来确定一年是不是闰年

00:00:33.755 --> 00:00:37.831
如果它能被 400 整除 那么就是闰年 如果能被 100 整除

00:00:37.831 --> 00:00:41.861
但是不能被 400 整除 那就不是 如果能够被 4 整除

00:00:41.861 --> 00:00:46.030
那就是闰年 其他情况都不是闰年 现在来把它转换成代码吧

00:00:46.030 --> 00:00:49.600
我要复制粘贴这个 这样我就看到它 当然如果我

00:00:49.600 --> 00:00:53.920
用更小的字体或者一个更大的屏幕 那么就可以同时看到两边

00:00:53.920 --> 00:00:57.587
这样就不需要复制粘贴了 不过将其作为注释也挺好的

00:00:57.587 --> 00:01:01.097
所以现在只需要把它转换成 Python 代码

00:01:01.097 --> 00:01:06.879
我可以用一种直接的方法 稍微偷偷懒 少打些字 只用一行写完

00:01:06.879 --> 00:01:12.280
但是让我想想 我想尝试第一次就能做对 我们将用更多行代码 并且我将

00:01:12.280 --> 00:01:13.931
仔细地按照维基百科上的写

00:01:13.931 --> 00:01:17.053
因此 如果年份除以 400 取余等于 0

00:01:17.053 --> 00:01:21.901
返回 True 这就是闰年 如果年份除以 100 取余等于 0

00:01:21.901 --> 00:01:26.466
就返回 False 这就不是闰年 如果年份除以 4 取余等于 0

00:01:26.466 --> 00:01:31.108
就返回 True 如果不等于 也并不是真正需要 else

00:01:31.108 --> 00:01:35.559
因为我们只需要返回 False 了 所以来测试一下吧

00:01:35.559 --> 00:01:40.231
如果我认为这个比较复杂的话 那么我可能会写些特殊的

00:01:40.231 --> 00:01:44.564
测试用例来测试闰年 现在我将直接来测试一些例子

00:01:44.564 --> 00:01:48.666
因为我觉得没有太多复杂的情况 所以

00:01:48.666 --> 00:01:54.417
2000 能被 400 整除 它应该是闰年 2100 不能被 400 整除

00:01:54.417 --> 00:02:02.103
应该就不是闰年 然后 2012 应该是闰年 2013 应该不是

00:02:02.103 --> 00:02:06.356
现在我可以很自信的说 代码是正确的 现在

00:02:06.356 --> 00:02:10.648
来试着把它放入 daysInMonth 里面去 我们需要修改一下月的天数

00:02:10.648 --> 00:02:14.495
当月份是二月的话 现在需要检查一下年份

00:02:14.495 --> 00:02:18.853
如果是闰年的话 返回 29 否则其他情况 返回 28

00:02:18.853 --> 00:02:21.970
这里不需要 else 但是我会把它放上 这样看起来会平衡一些

00:02:21.970 --> 00:02:26.149
好的 现在来运行一下测试程序 确保一切都是正确的

00:02:26.150 --> 00:02:30.426
测试都通过了 这很好 让我们再添加一些和闰年相关的测试吧

00:02:30.426 --> 00:02:34.961
先来测试下 nextDay 2月28号 如果是闰年的话会怎么样

00:02:34.961 --> 00:02:40.101
我们还应该加些比较长的年测试 闰年一年的天数

00:02:40.101 --> 00:02:44.894
应该是 366 现在就有了两个测试用例了 可以把之前算过的也加上

00:02:44.894 --> 00:02:49.681
然后 来看看 所有测试都通过了 现在我们就应该试着

00:02:49.681 --> 00:02:51.680
在提供的测试用例里来运行它了

